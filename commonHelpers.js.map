{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\niziToast.settings({\n  progressBar: false,\n  timeout: 4000,\n  resetOnHover: true,\n  icon: 'material-icons',\n  transitionIn: 'flipInX',\n  transitionOut: 'flipOutX',\n  position: 'topRight',\n});\n\nconst timePicker = document.querySelector('#datetime-picker');\nconst btnStart = document.querySelector('[data-start]');\nconst dataDays = document.querySelector('[data-days]');\nconst dataHours = document.querySelector('[data-hours]');\nconst dataMinutes = document.querySelector('[data-minutes]');\nconst dataSeconds = document.querySelector('[data-seconds]');\n\nlet userSelectedDate;\nlet intervalId = 0;\nlet msFromTimer = 0;\nbtnStart.disabled = true;\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    validationTargetDate(selectedDates[0]);\n  },\n};\n\nconst validationTargetDate = choseDay => {\n  if (intervalId > 0) {\n    return;\n  }\n\n  if (choseDay > new Date()) {\n    userSelectedDate = choseDay;\n    btnStart.disabled = false;\n    msFromTimer = Math.abs(choseDay - new Date());\n    return;\n  }\n\n  btnStart.disabled = true;\n  iziToast.error({\n    iconUrl: './img/text.svg',\n    message: 'Please choose a date in the future',\n  });\n};\n\nconst addLeadingZero = value => {\n  const arrOfTimes = {};\n  const obj = convertMs(value);\n  for (const key in obj) {\n    arrOfTimes[key] = String(obj[key]).padStart(2, '0');\n  }\n  return arrOfTimes;\n};\n\nconst intervalFunk = () => {\n  msFromTimer = msFromTimer - 1000;\n  if (msFromTimer <= 0) {\n    clearInterval(intervalId);\n    msFromTimer = 0;\n    intervalId = 0;\n    timePicker.disabled = false;\n  }\n\n  const arrOfDate = addLeadingZero(msFromTimer);\n\n  dataDays.textContent = arrOfDate.days;\n  dataHours.textContent = arrOfDate.hours;\n  dataMinutes.textContent = arrOfDate.minutes;\n  dataSeconds.textContent = arrOfDate.seconds;\n};\n\nconst startTimer = () => {\n  msFromTimer = userSelectedDate - new Date();\n  intervalId = setInterval(intervalFunk, 1000);\n  btnStart.disabled = true;\n  timePicker.disabled = true;\n};\n\nbtnStart.addEventListener('click', startTimer);\n\nflatpickr('#datetime-picker', options);"],"names":["iziToast","timePicker","btnStart","dataDays","dataHours","dataMinutes","dataSeconds","userSelectedDate","intervalId","msFromTimer","convertMs","ms","days","hours","minutes","seconds","options","selectedDates","validationTargetDate","choseDay","addLeadingZero","value","arrOfTimes","obj","key","intervalFunk","arrOfDate","startTimer","flatpickr"],"mappings":"0IAMAA,EAAS,SAAS,CAChB,YAAa,GACb,QAAS,IACT,aAAc,GACd,KAAM,iBACN,aAAc,UACd,cAAe,WACf,SAAU,UACZ,CAAC,EAED,MAAMC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIC,EACAC,EAAa,EACbC,EAAc,EAClBP,EAAS,SAAW,GAEpB,SAASQ,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBC,EAAqBD,EAAc,CAAC,CAAC,CACtC,CACH,EAEMC,EAAuBC,GAAY,CACvC,GAAI,EAAAX,EAAa,GAIjB,IAAIW,EAAW,IAAI,KAAQ,CACzBZ,EAAmBY,EACnBjB,EAAS,SAAW,GACpBO,EAAc,KAAK,IAAIU,EAAW,IAAI,IAAM,EAC5C,MACD,CAEDjB,EAAS,SAAW,GACpBF,EAAS,MAAM,CACb,QAAS,iBACT,QAAS,oCACb,CAAG,EACH,EAEMoB,EAAiBC,GAAS,CAC9B,MAAMC,EAAa,CAAA,EACbC,EAAMb,EAAUW,CAAK,EAC3B,UAAWG,KAAOD,EAChBD,EAAWE,CAAG,EAAI,OAAOD,EAAIC,CAAG,CAAC,EAAE,SAAS,EAAG,GAAG,EAEpD,OAAOF,CACT,EAEMG,EAAe,IAAM,CACzBhB,EAAcA,EAAc,IACxBA,GAAe,IACjB,cAAcD,CAAU,EACxBC,EAAc,EACdD,EAAa,EACbP,EAAW,SAAW,IAGxB,MAAMyB,EAAYN,EAAeX,CAAW,EAE5CN,EAAS,YAAcuB,EAAU,KACjCtB,EAAU,YAAcsB,EAAU,MAClCrB,EAAY,YAAcqB,EAAU,QACpCpB,EAAY,YAAcoB,EAAU,OACtC,EAEMC,EAAa,IAAM,CACvBlB,EAAcF,EAAmB,IAAI,KACrCC,EAAa,YAAYiB,EAAc,GAAI,EAC3CvB,EAAS,SAAW,GACpBD,EAAW,SAAW,EACxB,EAEAC,EAAS,iBAAiB,QAASyB,CAAU,EAE7CC,EAAU,mBAAoBZ,CAAO"}